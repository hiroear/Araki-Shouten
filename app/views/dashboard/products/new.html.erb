<!--ダッシュボード/商品一覧/新規作成-->
<div class="w-50">
  <h1>商品登録</h1>
  
  <hr>
  
  <%= form_with model: @product, url: dashboard_products_path, local: true do |f| %>
  <!--POST  dashboard/products#create -->
    <div class="form-inline mt-4 mb-4 row">
      <%= f.label '商品名', class: "col-2 d-flex justify-content-start" %>
      <%= f.text_field :name, class: "form-control col-8" %>
    </div>
    
    <div class="form-inline mt-4 mb-4 row">
      <%= f.label '商品説明', class: "col-2 d-flex justify-content-start" %>
      <%= f.text_area :description, class: "form-control col-8" %>
    </div>
    
    <div class="form-inline mt-4 mb-4 row">
      <%= f.label :price, '価格', class: "col-2 d-flex justify-content-start" %>
      <%= f.number_field :price, class: "form-control col-8" %>
    </div>
    
    <div class="form-inline mt-4 mb-4 row">
      <%= f.label 'カテゴリ', class: "col-2 d-flex justify-content-start" %>
      <%= f.collection_select(:category_id, @categories, :id, :name) %>
      <!--f.collection_select: モデルからの情報を元に選択ボックスを生成 ▶︎ 選択肢から選んでDBに送る。
        ◉ 構文： f.collection_select(パラメータ名, オブジェクトの配列, value属性, テキスト)
        ◉ 第一引数 パラメータ名(:category_id,): selectタグのid属性、name属性になる (<select name="○○" id="◯◯">)
        ◉ 第二引数 オブジェクトの配列(@categories): 選択肢の配列の元になるデータ (コントローラー/newアクションに定義)
        ◉ 第三引数 value属性(:id): 選択されたその値(value = id)がDBに送られる(<option value="◯◯">選択肢</option>)
        ◉ 第四引数 テキスト(:name): 選択ボックスに実際に表示するテキストをDBのカラムで指定-->
    </div>
    
       
    <div class="form-inline mt-4 mb-4 row">
      <%= f.label '画像', class: "col-2 d-flex justify-content-start" %>
      
      <% if @product.image.attached? %>  <%# 画像が添付されていたらimg要素生成⬇︎ %>
      <%# モデル.ファイル名.attached? :ファイルが添付されていれば true、添付がなければ falseを返す %>
        <%= image_tag @product.image, id: "product-image-preview", class: "img-fluid w-25" %>
        <%# image_tagメソッド: HTMLの imgタグ<img src="#" alt="#" />を生成するRailsのヘルパーメソッド。複雑なディレクトリパスを指定せずとも、モデルから画像ファイルを呼び出し引数に書く(@product.image)だけで該当の画像を表示した img要素を生成 %>
      <% else %>
        <img src="#" id="product-image-preview" class="">
        <%#= image_tag "/images/dummy.png", id: "product-image-preview", class: "img-fluid w-25" %>
      <% end %>
      
      <div class="d-flex flex-column ml-2">
        <small class="mb-3">600px×600px推奨。<br>商品の魅力が伝わる画像をアップロードして下さい。</small>
        <%= f.label :image, '画像を選択', class: "btn samazon-submit-button" %>
        <%= f.file_field :image, { onChange: "javascript: handleImage(this.files);", style: "display: none;"} %>
        <%# file_field: ファイル選択ボックスを生成。ファイルが選択された際 javascript発火？ %>
      </div>
    </div>
    
    
    <div class="form-inline mt-4 mb-4 row">
      <%= f.label :recommended_flag, 'オススメ？', class: "col-2 d-flex justify-content-start" %>
      <%= f.check_box :recommended_flag, class: "samazon-check-box" %>
    </div>
    
    <div class="form-inline mt-4 mb-4 row">
      <%= f.label '送料', class: "col-2 d-flex justify-content-start" %>
      <%= f.check_box :carriage_flag, class: "samazon-check-box" %>
    </div>
    
    <%= f.submit '商品を登録', class:"btn samazon-submit-button" %>
  <% end %>
  
  <div class="mt-4"><%= link_to '商品一覧に戻る', dashboard_products_path %></div>
</div>

<%= javascript_include_tag "dashboard/products/new" %>